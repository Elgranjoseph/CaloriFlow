<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gesti√≥n de Predios</title>

<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #0f172a;
        color: white;
        padding: 20px;
    }

    .card {
        background: #1e293b;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.05);
        max-width: 600px;
        margin: auto;
    }

    h1 {
        text-align: center;
        margin-bottom: 10px;
    }

    label {
        display: block;
        margin-top: 15px;
        font-weight: bold;
    }

    input, select, textarea {
        width: 100%;
        padding: 12px;
        margin-top: 8px;
        border-radius: 8px;
        border: none;
        background: #334155;
        color: white;
        font-size: 16px;
    }

    button {
        width: 100%;
        padding: 15px;
        margin-top: 20px;
        border: none;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        font-weight: bold;
    }

    .btn-green { background: #22c55e; }
    .btn-yellow { background: #facc15; }
    .btn-blue { background: #38bdf8; }
    .btn-orange { background: #fb923c; }

    .list-item {
        background: #1e293b;
        padding: 15px;
        border-radius: 10px;
        margin-top: 10px;
        border-left: 4px solid #38bdf8;
    }

    .small-btn {
        padding: 10px;
        margin-top: 10px;
        background: #ef4444;
        border: none;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }

</style>
</head>

<body>

<div class="card" id="mainMenu">
    <h1>Gesti√≥n de Predios</h1>

    <button class="btn-green" onclick="showAdd()">‚ûï Nuevo predio</button>
    <button class="btn-yellow" onclick="showSearch()">üîç Buscar / Lista</button>
    <button class="btn-blue" onclick="exportarDatos()">üì§ Exportar datos</button>
</div>


<!-- üìå NUEVO PREDIO -->
<div class="card" id="addScreen" style="display:none;">
    <button class="small-btn" onclick="goHome()">‚Üê Volver</button>

    <h2>Nuevo predio</h2>

    <label>Sitio</label>
    <input type="text" id="sitio" />

    <label>Sigla</label>
    <input type="text" id="sigla" />

    <label>Departamento</label>
    <select id="departamento">
        <option value="">Seleccionar...</option>
        <option>ARTIGAS</option>
        <option>CANELONES</option>
        <option>CERRO LARGO</option>
        <option>COLONIA</option>
        <option>DURAZNO</option>
        <option>FLORES</option>
        <option>FLORIDA</option>
        <option>LAVALLEJA</option>
        <option>MALDONADO</option>
        <option>MONTEVIDEO</option>
        <option>PAYSAND√ö</option>
        <option>R√çO NEGRO</option>
        <option>RIVERA</option>
        <option>ROCHA</option>
        <option>SALTO</option>
        <option>SAN JOS√â</option>
        <option>SORIANO</option>
        <option>TACUAREMB√ì</option>
        <option>TREINTA Y TRES</option>
    </select>

    <label>Fecha</label>
    <input type="date" id="fecha" />

    <label>Medidas (anot√° todo: largo x ancho, partes, etc.)</label>
    <textarea id="medidas" rows="4"></textarea>

    <label>√Årea total (m¬≤) calculada</label>
    <input type="number" id="area" />

    <button class="btn-green" onclick="guardarPredio()">üíæ Guardar predio</button>
</div>


<!-- üìå BUSCAR / LISTA -->
<div class="card" id="searchScreen" style="display:none;">
    <button class="small-btn" onclick="goHome()">‚Üê Volver</button>
    <h2>Buscar predio</h2>

    <input type="text" id="searchBox" placeholder="Buscar por sitio o sigla..." oninput="buscarPredios()" />

    <div id="listaResultados"></div>
</div>


<script>
/* ============================
       SISTEMA DE DATOS
============================ */
let predios = JSON.parse(localStorage.getItem("predios_antel") || "[]");

function saveDB() {
    localStorage.setItem("predios_antel", JSON.stringify(predios));
}

/* ============================
       PANTALLAS
============================ */
function showAdd() {
    document.getElementById("mainMenu").style.display = "none";
    document.getElementById("addScreen").style.display = "block";
}

function showSearch() {
    document.getElementById("mainMenu").style.display = "none";
    document.getElementById("searchScreen").style.display = "block";
    buscarPredios();
}

function goHome() {
    document.getElementById("mainMenu").style.display = "block";
    document.getElementById("addScreen").style.display = "none";
    document.getElementById("searchScreen").style.display = "none";
}

/* ============================
      GUARDAR PREDIO
============================ */
function guardarPredio() {
    const sitio = sitioInput.value.trim();
    const sigla = siglaInput.value.trim();
    const departamento = departamentoInput.value;
    const fecha = fechaInput.value;
    const medidas = medidasInput.value.trim();
    const area = areaInput.value.trim();

    if(!sitio || !sigla || !departamento || !fecha || !medidas || !area) {
        alert("Complet√° todos los campos.");
        return;
    }

    predios.push({
        sitio,
        sigla,
        departamento,
        fecha,
        medidas,
        area
    });

    saveDB();

    alert("Predio guardado.");
    goHome();
}

/* ============================
      BUSCAR / LISTAR
============================ */
function buscarPredios() {
    const txt = searchBox.value.toUpperCase();
    const cont = document.getElementById("listaResultados");
    cont.innerHTML = "";

    predios
        .filter(p => p.sitio.includes(txt) || p.sigla.includes(txt))
        .forEach(p => {
            const div = document.createElement("div");
            div.className = "list-item";
            div.innerHTML = `
                <strong>${p.sitio}</strong><br>
                Sigla: ${p.sigla}<br>
                Departamento: ${p.departamento}<br>
                Fecha: ${p.fecha}<br>
                Medidas: ${p.medidas}<br>
                √Årea total: ${p.area} m¬≤
            `;
            cont.appendChild(div);
        });
}

/* ============================
      EXPORTAR DATOS
============================ */
function exportarDatos() {
    if(predios.length === 0) {
        alert("No hay datos para exportar.");
        return;
    }

    const blob = new Blob([JSON.stringify(predios, null, 2)], { type: "application/json" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "predios_antel.json";
    a.click();

    URL.revokeObjectURL(url);
}

/* ========================================
      MAY√öSCULAS AUTOM√ÅTICAS
======================================== */
document.addEventListener("input", (e) => {
    const el = e.target;

    if (el.tagName === "INPUT" && el.type === "text") {
        el.value = el.value.toUpperCase();
    }

    if (el.tagName === "TEXTAREA") {
        el.value = el.value.toUpperCase();
    }
});
</script>

</body>
</html>